<!DOCTYPE html>
<html>
<head>
  <title>Crowd Density Map - Karnataka</title>
 <style>
    body {
      background-color: #006600;
      color: white; /* Optional: Makes text visible on dark green */
      font-family: Arial, sans-serif;
    }
  </style>
  <style>
    body {
      font-family: sans-serif;
    }

    .image-container {
      position: relative;
      display: inline-block;
      margin-left: 400px;
      margin-top: 50px; /* slightly less top margin here, table below will have 400px */
    }

    .dot {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.4);
      display: none;
      opacity: 0.8;
      transition: width 0.3s, height 0.3s, background-color 0.3s;
      z-index: 10;
      pointer-events: none;
    }

    /* Table styles and positioning */
    table {
      border-collapse: collapse;
      margin-left: 400px;
      margin-top: 400px;
      width: 600px;
      text-align: center;
      font-family: Arial, sans-serif;
    }
    th, td {
      border: 1px solid #333;
      padding: 10px;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>
  <h1 style="margin-left:400px;">Crowd Density Map - Karnataka</h1>

  <div class="image-container">
    <img src="karnataka.gif" alt="Karnataka Map" width="1000" />
    <div class="dot" id="dot"></div>
  </div>

  <script>
    window.onload = function () {
      const karnatakaCities = {
        Bengaluru: { x: 420, y: 520 },
        Mysuru: { x: 350, y: 600 },
      };

      const dot = document.getElementById("dot");

      // Simulate population and show dot on map if >5000
      function updateDotAndTable() {
        const data = [];
        dot.style.display = "none"; // hide initially

        // We'll generate data for all cities for table & dots
        for (const city in karnatakaCities) {
          const population = Math.floor(Math.random() * 20000) + 1;
          let signals = Math.floor(population / 4000) + 1; // some signals metric
          let dangerLevel = "Low";

          if (population > 15000) dangerLevel = "Critical";
          else if (population > 10000) dangerLevel = "High";
          else if (population > 5000) dangerLevel = "Medium";

          data.push({ city, signals, dangerLevel, population });

          // If city population > 5000, show a dot on map (just one dot for demonstration)
          if (population > 5000) {
            const pos = karnatakaCities[city];
            const size = 10 + ((population - 5000) / 15000) * 40;

            let color;
            if (population > 15000) color = 'red';
            else if (population > 10000) color = 'orange';
            else color = 'yellow';

            // Show dot near last city with > 5000 population
            dot.style.left = `${pos.x}px`;
            dot.style.top = `${pos.y}px`;
            dot.style.width = `${size}px`;
            dot.style.height = `${size}px`;
            dot.style.backgroundColor = color;
            dot.style.display = "block";
          }
        }

        updateTable(data);
      }

      // Initial load
      updateDotAndTable();

      // Update every 10 seconds to simulate dynamic changes
      setInterval(updateDotAndTable, 5000);
    };
  </script>
</body>
</html>
